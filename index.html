<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>Zikrov Enterprise Solution v10.0</title>
    
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    
    <style>
        /* =========================================
           1. CSS –ü–ï–†–ï–ú–ï–ù–ù–´–ï –ò –î–ò–ó–ê–ô–ù-–°–ò–°–¢–ï–ú–ê
           =========================================
        */
        :root {
            /* –ü–∞–ª–∏—Ç—Ä–∞ */
            --bg-black: #000000;
            --bg-dark-100: #121212;
            --bg-dark-200: #1c1c1e;
            --bg-dark-300: #2c2c2e;
            
            --accent-primary: #007aff;
            --accent-primary-rgb: 0, 122, 255;
            --accent-success: #34c759;
            --accent-warning: #ff9f0a;
            --accent-error: #ff3b30;
            
            --text-main: #ffffff;
            --text-secondary: #8e8e93;
            --text-muted: #48484a;
            
            /* –°–ø–µ—Ü—ç—Ñ—Ñ–µ–∫—Ç—ã */
            --glass: rgba(28, 28, 30, 0.7);
            --border: rgba(255, 255, 255, 0.1);
            --shadow-lg: 0 10px 30px rgba(0, 0, 0, 0.5);
            
            /* –ì–µ–æ–º–µ—Ç—Ä–∏—è */
            --radius-xl: 24px;
            --radius-lg: 18px;
            --radius-md: 12px;
            --safe-bottom: env(safe-area-inset-bottom);
        }

        /* =========================================
           2. –ì–õ–û–ë–ê–õ–¨–ù–´–ï –°–¢–ò–õ–ò (RESET & BASE)
           =========================================
        */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            -webkit-tap-highlight-color: transparent;
            font-family: -apple-system, BlinkMacSystemFont, "SF Pro Display", "Segoe UI", Roboto, sans-serif;
        }

        body {
            background-color: var(--bg-black);
            color: var(--text-main);
            overflow-x: hidden;
            width: 100%;
            min-height: 100vh;
            line-height: 1.4;
            padding-bottom: calc(100px + var(--safe-bottom));
        }

        /* –ö–∞—Å—Ç–æ–º–Ω—ã–π —Å–∫—Ä–æ–ª–ª–±–∞—Ä */
        ::-webkit-scrollbar { width: 4px; }
        ::-webkit-scrollbar-track { background: var(--bg-black); }
        ::-webkit-scrollbar-thumb { background: var(--bg-dark-300); border-radius: 10px; }

        /* =========================================
           3. –ê–ù–ò–ú–ê–¶–ò–ò
           =========================================
        */
        @keyframes slideUp {
            from { opacity: 0; transform: translateY(30px); }
            to { opacity: 1; transform: translateY(0); }
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        @keyframes skeleton {
            0% { background-position: 100% 0; }
            100% { background-position: -100% 0; }
        }

        .anim-slide-up { animation: slideUp 0.5s cubic-bezier(0.2, 0.8, 0.2, 1); }
        .anim-fade { animation: fadeIn 0.3s ease; }

        /* =========================================
           4. –ö–û–ú–ü–û–ù–ï–ù–¢–´ –ò–ù–¢–ï–†–§–ï–ô–°–ê
           =========================================
        */
        .container {
            padding: 0 16px;
            max-width: 600px;
            margin: 0 auto;
        }

        /* –•–µ–¥–µ—Ä */
        .header {
            padding: 24px 16px 12px;
            position: sticky;
            top: 0;
            background: var(--bg-black);
            z-index: 100;
        }

        .header h1 { font-size: 32px; font-weight: 800; letter-spacing: -0.5px; }
        .header p { color: var(--text-secondary); font-size: 14px; margin-top: 4px; }

        /* –ü–æ–∏—Å–∫ */
        .search-container {
            margin: 16px 0;
            position: relative;
        }

        .search-input {
            width: 100%;
            background: var(--bg-dark-200);
            border: 1px solid var(--border);
            border-radius: var(--radius-md);
            padding: 14px 16px 14px 44px;
            color: white;
            font-size: 16px;
            outline: none;
            transition: 0.3s;
        }

        .search-input:focus { border-color: var(--accent-primary); }
        .search-icon {
            position: absolute; left: 16px; top: 50%;
            transform: translateY(-50%); color: var(--text-secondary);
        }

        /* –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ (Grid) */
        .grid-categories {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 12px;
            margin-bottom: 30px;
        }

        .category-item {
            background: var(--bg-dark-200);
            border-radius: var(--radius-lg);
            padding: 20px;
            border: 1px solid var(--border);
            transition: all 0.3s;
            position: relative;
            overflow: hidden;
        }

        .category-item:active { transform: scale(0.96); background: var(--bg-dark-300); }
        
        .cat-icon {
            font-size: 30px;
            margin-bottom: 12px;
            display: block;
        }

        .cat-title { font-weight: 700; font-size: 16px; display: block; }
        .cat-count { font-size: 12px; color: var(--text-secondary); margin-top: 4px; }

        /* –°–ø–∏—Å–æ–∫ —Ç–æ–≤–∞—Ä–æ–≤ */
        .product-list { display: flex; flex-direction: column; gap: 10px; }

        .product-card {
            background: var(--bg-dark-200);
            border-radius: var(--radius-lg);
            padding: 16px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            border: 1px solid var(--border);
            transition: 0.2s;
        }

        .product-card:active { border-color: var(--accent-primary); }

        .prod-info h3 { font-size: 16px; font-weight: 700; }
        .prod-info p { font-size: 13px; color: var(--text-secondary); margin-top: 2px; }

        .prod-price {
            background: var(--accent-primary-rgb);
            color: var(--accent-primary);
            padding: 8px 12px;
            border-radius: 10px;
            font-weight: 800;
            font-size: 15px;
            background: rgba(0, 122, 255, 0.1);
        }

        /* –¢–∞–± –ë–∞—Ä */
        .tab-bar {
            position: fixed;
            bottom: 0; left: 0; right: 0;
            height: calc(85px + var(--safe-bottom));
            background: var(--glass);
            backdrop-filter: blur(25px);
            -webkit-backdrop-filter: blur(25px);
            display: flex;
            justify-content: space-around;
            padding: 10px 10px var(--safe-bottom);
            border-top: 1px solid var(--border);
            z-index: 1000;
        }

        .tab-item {
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            color: var(--text-secondary); text-decoration: none; width: 20%; transition: 0.3s;
        }

        .tab-item.active { color: var(--accent-primary); }
        .tab-item svg { width: 26px; height: 26px; margin-bottom: 4px; fill: currentColor; }
        .tab-item span { font-size: 10px; font-weight: 600; text-transform: uppercase; letter-spacing: 0.5px; }

        /* –ú–æ–¥–∞–ª—å–Ω—ã–µ –æ–∫–Ω–∞ */
        .modal-overlay {
            position: fixed;
            top: 0; left: 0; right: 0; bottom: 0;
            background: rgba(0,0,0,0.85);
            display: none; align-items: flex-end; z-index: 2000;
            backdrop-filter: blur(10px);
        }

        .modal-overlay.active { display: flex; }

        .modal-sheet {
            background: var(--bg-dark-200);
            width: 100%;
            border-radius: 32px 32px 0 0;
            padding: 32px 24px calc(32px + var(--safe-bottom));
            transform: translateY(100%);
            transition: transform 0.4s cubic-bezier(0.2, 0.8, 0.2, 1);
            max-height: 90vh;
            overflow-y: auto;
        }

        .modal-overlay.active .modal-sheet { transform: translateY(0); }

        /* –ö–Ω–æ–ø–∫–∏ */
        .btn {
            border: none; border-radius: var(--radius-md); font-weight: 700; font-size: 16px;
            cursor: pointer; display: flex; align-items: center; justify-content: center; gap: 10px;
            width: 100%; padding: 18px; transition: 0.2s;
        }

        .btn-primary { background: var(--accent-primary); color: white; }
        .btn-secondary { background: var(--bg-dark-300); color: white; }
        .btn-success { background: var(--accent-success); color: white; }
        .btn:active { transform: scale(0.98); opacity: 0.9; }

        /* –°–ø–µ—Ü–∏—Ñ–∏—á–µ—Å–∫–∏–µ –±–ª–æ–∫–∏ */
        .profile-card {
            background: linear-gradient(135deg, var(--bg-dark-200), #1a1a1a);
            border-radius: var(--radius-xl);
            padding: 24px;
            margin-bottom: 20px;
            border: 1px solid var(--border);
        }

        .stats-row {
            display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 10px; margin-top: 20px;
        }

        .stat-item {
            background: rgba(255,255,255,0.03);
            padding: 12px; border-radius: 14px; text-align: center;
        }

        .stat-val { display: block; font-size: 18px; font-weight: 800; color: var(--accent-primary); }
        .stat-lbl { display: block; font-size: 10px; color: var(--text-secondary); text-transform: uppercase; margin-top: 4px; }

        /* –ê–¥–º–∏–Ω-–õ–æ–≥ */
        .admin-console {
            background: #000;
            border-radius: 12px;
            padding: 15px;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #00ff00;
            height: 200px;
            overflow-y: auto;
            border: 1px solid #333;
            margin: 15px 0;
        }

        /* Views */
        .view { display: none; }
        .view.active { display: block; }

        /* Skeleton */
        .skeleton-item {
            height: 80px;
            background: linear-gradient(90deg, #1c1c1e 25%, #2c2c2e 50%, #1c1c1e 75%);
            background-size: 200% 100%;
            animation: skeleton 1.5s infinite;
            border-radius: 16px;
            margin-bottom: 10px;
        }
    </style>
</head>
<body>

    <div id="view-shop" class="view active anim-fade">
        <div class="header">
            <h1>Zikrov Shop</h1>
            <p>–ü—Ä–µ–º–∏–∞–ª—å–Ω—ã–π –¥–æ—Å—Ç—É–ø –∫ –∞–∫–∫–∞—É–Ω—Ç–∞–º</p>
            <div class="search-container">
                <span class="search-icon">üîç</span>
                <input type="text" class="search-input" id="global-search" placeholder="–ü–æ–∏—Å–∫ —Ç–æ–≤–∞—Ä–æ–≤..." oninput="App.Logic.search(this.value)">
            </div>
        </div>

        <div class="container">
            <div id="cat-grid" class="grid-categories anim-slide-up">
                </div>

            <div id="prod-view" style="display: none;">
                <div style="display: flex; align-items: center; justify-content: space-between; margin-bottom: 20px;">
                    <h2 id="current-cat-name" style="font-size: 22px;">–¢–æ–≤–∞—Ä—ã</h2>
                    <button class="btn-secondary" style="width: auto; padding: 6px 14px; border-radius: 10px; font-size: 13px;" onclick="App.UI.toggleShopView(false)">‚Üê –ù–∞–∑–∞–¥</button>
                </div>
                <div id="prod-list" class="product-list">
                    </div>
            </div>
        </div>
    </div>

    <div id="view-cart" class="view anim-fade">
        <div class="header">
            <h1>–ö–æ—Ä–∑–∏–Ω–∞</h1>
            <p>–í–∞—à–∏ –≤—ã–±—Ä–∞–Ω–Ω—ã–µ –ø–æ–∑–∏—Ü–∏–∏</p>
        </div>
        <div class="container">
            <div id="cart-empty" style="text-align: center; padding: 60px 20px;">
                <span style="font-size: 64px;">üõí</span>
                <h3 style="margin-top: 20px;">–ö–æ—Ä–∑–∏–Ω–∞ –ø—É—Å—Ç–∞</h3>
                <p style="color: var(--text-secondary); margin-top: 10px;">–í–µ—Ä–Ω–∏—Ç–µ—Å—å –≤ –º–∞–≥–∞–∑–∏–Ω, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Ç–æ–≤–∞—Ä—ã</p>
                <button class="btn btn-primary" style="margin-top: 30px;" onclick="App.UI.switchTab('shop')">–í –ú–ê–ì–ê–ó–ò–ù</button>
            </div>
            
            <div id="cart-content" style="display: none;">
                <div id="cart-items" class="product-list"></div>
                <div class="profile-card" style="margin-top: 25px;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 15px;">
                        <span style="color: var(--text-secondary);">–ò—Ç–æ–≥–æ –∫ –æ–ø–ª–∞—Ç–µ:</span>
                        <span id="cart-total-price" style="font-size: 24px; font-weight: 800; color: var(--accent-primary);">0 ‚ÇΩ</span>
                    </div>
                    <button class="btn btn-primary" onclick="App.Logic.checkout()">–û–§–û–†–ú–ò–¢–¨ –ó–ê–ö–ê–ó</button>
                </div>
            </div>
        </div>
    </div>

    <div id="view-profile" class="view anim-fade">
        <div class="header">
            <h1>–ö–∞–±–∏–Ω–µ—Ç</h1>
            <p>–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –≤–∞—à–∏–º –∞–∫–∫–∞—É–Ω—Ç–æ–º</p>
        </div>
        <div class="container">
            <div class="profile-card">
                <div style="display: flex; align-items: center; gap: 16px;">
                    <div id="user-avatar" style="width: 64px; height: 64px; border-radius: 20px; background: var(--accent-primary); display: flex; align-items: center; justify-content: center; font-size: 24px; font-weight: 800;">U</div>
                    <div>
                        <h2 id="user-full-name">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</h2>
                        <p id="user-status" style="color: var(--accent-success); font-size: 13px; font-weight: 600;">‚óè –í–µ—Ä–∏—Ñ–∏—Ü–∏—Ä–æ–≤–∞–Ω</p>
                    </div>
                </div>

                <div class="stats-row">
                    <div class="stat-item">
                        <span class="stat-val" id="stat-orders">0</span>
                        <span class="stat-lbl">–ü–æ–∫—É–ø–æ–∫</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-val" id="stat-spent">0 ‚ÇΩ</span>
                        <span class="stat-lbl">–¢—Ä–∞—Ç—ã</span>
                    </div>
                    <div class="stat-item">
                        <span class="stat-val">VIP</span>
                        <span class="stat-lbl">–†–∞–Ω–≥</span>
                    </div>
                </div>
            </div>

            <button class="btn btn-secondary" style="margin-bottom: 12px;" onclick="App.UI.showHistory()">üìã –ò–°–¢–û–†–ò–Ø –ó–ê–ö–ê–ó–û–í</button>
            <button class="btn btn-secondary" style="margin-bottom: 12px;" onclick="window.Telegram.WebApp.openTelegramLink('https://t.me/Z1KROV')">üë®‚Äçüíª –¢–ï–•. –ü–û–î–î–ï–†–ñ–ö–ê</button>
            
            <div id="admin-section" style="display: none; margin-top: 30px; border-top: 1px solid var(--border); padding-top: 30px;">
                <h2 style="color: var(--accent-error); font-size: 18px; margin-bottom: 15px;">TERMINAL: ADMIN ACCESS</h2>
                <div class="admin-console" id="admin-log">
                    > System Kernel v10.0.4 loaded...<br>
                    > Authentication success.
                </div>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 10px;">
                    <button class="btn btn-secondary" style="font-size: 12px; padding: 12px;" onclick="App.Admin.toggleStock()">üì¶ STOCK MGMT</button>
                    <button class="btn btn-secondary" style="font-size: 12px; padding: 12px;" onclick="App.Admin.clearLogs()">üßπ CLEAR LOGS</button>
                </div>
            </div>
        </div>
    </div>

    <div id="modal-payment" class="modal-overlay" onclick="App.UI.closeModal()">
        <div class="modal-sheet" onclick="event.stopPropagation()">
            <h2 id="payment-title" style="margin-bottom: 8px;">–û–ø–ª–∞—Ç–∞ –∑–∞–∫–∞–∑–∞</h2>
            <p id="payment-desc" style="color: var(--text-secondary); font-size: 14px; margin-bottom: 24px;">–í—ã–±–µ—Ä–∏—Ç–µ —Å–ø–æ—Å–æ–± –æ–ø–ª–∞—Ç—ã</p>
            
            <div class="profile-card" style="background: rgba(255,255,255,0.03); margin-bottom: 24px;">
                <div style="display: flex; justify-content: space-between; margin-bottom: 8px;">
                    <span>–¢–æ–≤–∞—Ä:</span>
                    <span id="pay-item-name" style="font-weight: 700;">-</span>
                </div>
                <div style="display: flex; justify-content: space-between;">
                    <span>–ö –æ–ø–ª–∞—Ç–µ:</span>
                    <span id="pay-item-price" style="color: var(--accent-primary); font-weight: 800;">0 ‚ÇΩ</span>
                </div>
            </div>

            <div id="payment-methods">
                <button class="btn btn-secondary" style="margin-bottom: 12px; justify-content: flex-start;" onclick="App.Logic.processPayment('SBP')">
                    <span style="font-size: 20px;">üè¶</span> –°–ë–ü / –ö–∞—Ä—Ç–∞ –†–§
                </button>
                <button class="btn btn-secondary" style="margin-bottom: 12px; justify-content: flex-start;" onclick="App.Logic.processPayment('CRYPTO')">
                    <span style="font-size: 20px;">üíé</span> Crypto (USDT/TON)
                </button>
                <button class="btn btn-secondary" style="justify-content: flex-start;" onclick="App.Logic.processPayment('LZT')">
                    <span style="font-size: 20px;">üíπ</span> Lolz Market Balance
                </button>
            </div>

            <div id="payment-processing" style="display: none; text-align: center; padding: 20px 0;">
                <div class="skeleton-item" style="height: 4px; width: 60%; margin: 20px auto; animation: pulse 1s infinite;"></div>
                <p style="color: var(--accent-warning);">–û–∂–∏–¥–∞–Ω–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏...</p>
                <p style="font-size: 12px; color: var(--text-secondary); margin-top: 10px;">–ù–µ –∑–∞–∫—Ä—ã–≤–∞–π—Ç–µ –æ–∫–Ω–æ –¥–æ –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è</p>
            </div>
        </div>
    </div>

    <nav class="tab-bar">
        <a href="javascript:void(0)" class="tab-item active" onclick="App.UI.switchTab('shop')">
            <svg viewBox="0 0 24 24"><path d="M12 3L4 9v12h16V9l-8-6zm6 16h-3v-4h-6v4H6v-9l6-4.5 6 4.5v9z"/></svg>
            <span>–ú–∞–≥–∞–∑–∏–Ω</span>
        </a>
        <a href="javascript:void(0)" class="tab-item" onclick="App.UI.switchTab('cart')">
            <svg viewBox="0 0 24 24"><path d="M7 18c-1.1 0-1.99.9-1.99 2S5.9 22 7 22s2-.9 2-2-.9-2-2-2zM1 2v2h2l3.6 7.59-1.35 2.45c-.16.28-.25.61-.25.96 0 1.1.9 2 2 2h12v-2H7.42c-.14 0-.25-.11-.25-.25l.03-.12.9-1.63h7.45c.75 0 1.41-.41 1.75-1.03l3.58-6.49c.08-.14.12-.31.12-.48 0-.55-.45-1-1-1H5.21l-.94-2H1zm16 16c-1.1 0-1.99.9-1.99 2s.89 2 1.99 2 2-.9 2-2-.9-2-2-2z"/></svg>
            <span>–ö–æ—Ä–∑–∏–Ω–∞</span>
        </a>
        <a href="javascript:void(0)" class="tab-item" onclick="App.UI.switchTab('profile')">
            <svg viewBox="0 0 24 24"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 3c1.66 0 3 1.34 3 3s-1.34 3-3 3-3-1.34-3-3 1.34-3 3-3zm0 14.2c-2.5 0-4.71-1.28-6-3.22.03-1.99 4-3.08 6-3.08 1.99 0 5.97 1.09 6 3.08-1.29 1.94-3.5 3.22-6 3.22z"/></svg>
            <span>–ö–∞–±–∏–Ω–µ—Ç</span>
        </a>
    </nav>

    <script>
        /**
         * ZIKROV ENTERPRISE APP ENGINE
         * –í–µ—Ä—Å–∏—è: 10.0.4
         * –Ø–¥—Ä–æ: –ú–æ–Ω–æ–ª–∏—Ç–Ω–æ–µ
         */

        const App = {
            // –ö–û–ù–§–ò–ì–£–†–ê–¶–ò–Ø –ò –î–ê–ù–ù–´–ï
            Data: {
                admin_id: 1577146268, // –ó–∞–º–µ–Ω–∏ –Ω–∞ —Å–≤–æ–π
                categories: [
                    { id: 'cat_tg', name: 'Telegram (–†–µ–≥–∞)', icon: 'üì±', desc: '–°–≤–µ–∂–∏–µ –∞–∫–∫–∞—É–Ω—Ç—ã' },
                    { id: 'cat_tg_aged', name: 'Telegram (–û—Ç–ª–µ–≥–∞)', icon: '‚è≥', desc: '–í—ã–¥–µ—Ä–∂–∫–∞ –æ—Ç 1 –º–µ—Å' },
                    { id: 'cat_soft', name: '–°–æ—Ñ—Ç—ã / –ö–ª—é—á–∏', icon: 'üõ†', desc: 'VPN, Discord, Nitro' },
                    { id: 'cat_games', name: '–ò–≥—Ä—ã / Steam', icon: 'üéÆ', desc: 'Accounts & Keys' },
                    { id: 'cat_streaming', name: '–ö–∏–Ω–æ / –ú—É–∑—ã–∫–∞', icon: 'üçø', desc: 'Spotify, Netflix' },
                    { id: 'cat_proxy', name: '–ü—Ä–æ–∫—Å–∏ / VPN', icon: 'üåê', desc: '–ü—Ä–∏–≤–∞—Ç–Ω—ã–µ IPv4/6' }
                ],
                products: [
                    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è: TG –†–µ–≥–∞
                    { id: 1, cat_id: 'cat_tg', name: '–ì–µ—Ä–º–∞–Ω–∏—è +49 (–§–∏–∑–∏–∫–∞)', price: 320, stock: 45, info: 'Tdata / Session' },
                    { id: 2, cat_id: 'cat_tg', name: '–ö–∞–∑–∞—Ö—Å—Ç–∞–Ω +7 (–í–∏—Ä—Ç)', price: 180, stock: 112, info: 'Tdata' },
                    { id: 3, cat_id: 'cat_tg', name: '–°–®–ê +1 (–í–∏—Ä—Ç)', price: 65, stock: 400, info: 'Session' },
                    { id: 4, cat_id: 'cat_tg', name: '–¢—É—Ä—Ü–∏—è +90 (–ü—Ä–∏–≤–∞—Ç)', price: 150, stock: 32, info: 'Tdata' },
                    { id: 5, cat_id: 'cat_tg', name: '–ò–Ω–¥–æ–Ω–µ–∑–∏—è +62', price: 95, stock: 88, info: 'Session' },
                    
                    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è: TG –û—Ç–ª–µ–≥–∞
                    { id: 6, cat_id: 'cat_tg_aged', name: '–ì–µ—Ä–º–∞–Ω–∏—è (3 –º–µ—Å+)', price: 450, stock: 12, info: '–ü—Ä–µ–º–∏—É–º –æ—Ç–ª–µ–≥–∞' },
                    { id: 7, cat_id: 'cat_tg_aged', name: '–°–®–ê (6 –º–µ—Å+)', price: 280, stock: 5, info: '–°—Ç–∞—Ä—ã–µ –∞–∫–∫–∏' },
                    { id: 8, cat_id: 'cat_tg_aged', name: '–†–§ (1 –≥–æ–¥+)', price: 1200, stock: 2, info: '–õ–∏—á–Ω—ã–µ' },

                    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –°–æ—Ñ—Ç
                    { id: 9, cat_id: 'cat_soft', name: 'Discord Nitro (1 –º–µ—Å)', price: 350, stock: 99, info: 'Full Version' },
                    { id: 10, cat_id: 'cat_soft', name: 'VPN Windscribe 360GB', price: 150, stock: 20, info: '–ê–∫–∫–∞—É–Ω—Ç' },
                    { id: 11, cat_id: 'cat_soft', name: 'NordVPN Premium 2025', price: 400, stock: 15, info: '–ê–∫–∫–∞—É–Ω—Ç' },

                    // –ö–∞—Ç–µ–≥–æ—Ä–∏—è: –°—Ç—Ä–∏–º–∏–Ω–≥
                    { id: 12, cat_id: 'cat_streaming', name: 'Spotify Premium 1m', price: 250, stock: 50, info: '–ò–Ω–≤–∞–π—Ç' },
                    { id: 13, cat_id: 'cat_streaming', name: 'Netflix Ultra HD', price: 450, stock: 10, info: '–û–±—â–∏–π –∞–∫–∫' }
                ]
            },

            // –°–û–°–¢–û–Ø–ù–ò–ï –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø (STORE)
            Store: {
                user: null,
                cart: [],
                history: JSON.parse(localStorage.getItem('zik_history') || '[]'),
                currentView: 'shop',
                searchQuery: '',
                
                get totalSpent() {
                    return this.history.reduce((sum, item) => sum + item.price, 0);
                }
            },

            // –ú–û–î–£–õ–¨ –£–ü–†–ê–í–õ–ï–ù–ò–Ø –ò–ù–¢–ï–†–§–ï–ô–°–û–ú
            UI: {
                init() {
                    const tg = window.Telegram.WebApp;
                    tg.expand();
                    tg.ready();
                    
                    this.setupUser();
                    this.renderCategories();
                    this.updateStats();
                    App.Admin.log("UI Module initialized");
                },

                setupUser() {
                    const user = window.Telegram.WebApp.initDataUnsafe.user || { 
                        id: 0, first_name: 'Local', last_name: 'User', username: 'dev_test' 
                    };
                    App.Store.user = user;
                    
                    document.getElementById('user-full-name').innerText = user.first_name + (user.last_name ? ' ' + user.last_name : '');
                    document.getElementById('user-avatar').innerText = user.first_name.charAt(0).toUpperCase();
                    
                    if(user.id === App.Data.admin_id) {
                        document.getElementById('admin-section').style.display = 'block';
                        App.Admin.log("Admin privileges granted to: " + user.id);
                    }
                },

                switchTab(tab) {
                    App.Store.currentView = tab;
                    
                    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –∫–Ω–æ–ø–æ–∫ —Ç–∞–±-–±–∞—Ä–∞
                    document.querySelectorAll('.tab-item').forEach(item => {
                        item.classList.remove('active');
                        if(item.innerText.toLowerCase().includes(tab === 'shop' ? '–º–∞–≥–∞–∑–∏–Ω' : tab === 'cart' ? '–∫–æ—Ä–∑–∏–Ω–∞' : '–∫–∞–±–∏–Ω–µ—Ç')) {
                            item.classList.add('active');
                        }
                    });

                    // –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –≤—å—é—Ö
                    document.querySelectorAll('.view').forEach(v => v.classList.remove('active'));
                    document.getElementById(`view-${tab}`).classList.add('active');
                    
                    window.Telegram.WebApp.HapticFeedback.selectionChanged();
                    
                    if(tab === 'cart') this.renderCart();
                },

                renderCategories() {
                    const container = document.getElementById('cat-grid');
                    container.innerHTML = App.Data.categories.map(cat => {
                        const count = App.Data.products.filter(p => p.cat_id === cat.id).length;
                        return `
                            <div class="category-item" onclick="App.Logic.openCategory('${cat.id}')">
                                <span class="cat-icon">${cat.icon}</span>
                                <span class="cat-title">${cat.name}</span>
                                <span class="cat-count">${count} —Ç–æ–≤–∞—Ä–æ–≤</span>
                            </div>
                        `;
                    }).join('');
                },

                toggleShopView(isProducts) {
                    const grid = document.getElementById('cat-grid');
                    const prodView = document.getElementById('prod-view');
                    const search = document.querySelector('.search-container');
                    
                    if(isProducts) {
                        grid.style.display = 'none';
                        search.style.display = 'none';
                        prodView.style.display = 'block';
                    } else {
                        grid.style.display = 'grid';
                        search.style.display = 'block';
                        prodView.style.display = 'none';
                    }
                },

                renderCart() {
                    const empty = document.getElementById('cart-empty');
                    const content = document.getElementById('cart-content');
                    const list = document.getElementById('cart-items');
                    
                    if(App.Store.cart.length === 0) {
                        empty.style.display = 'block';
                        content.style.display = 'none';
                    } else {
                        empty.style.display = 'none';
                        content.style.display = 'block';
                        
                        let total = 0;
                        list.innerHTML = App.Store.cart.map((item, idx) => {
                            total += item.price;
                            return `
                                <div class="product-card anim-slide-up">
                                    <div class="prod-info">
                                        <h3>${item.name}</h3>
                                        <p>${item.info}</p>
                                    </div>
                                    <div style="display: flex; align-items: center; gap: 12px;">
                                        <div class="prod-price">${item.price} ‚ÇΩ</div>
                                        <button onclick="App.Logic.removeFromCart(${idx})" style="background: none; border: none; color: var(--accent-error); font-size: 20px;">√ó</button>
                                    </div>
                                </div>
                            `;
                        }).join('');
                        document.getElementById('cart-total-price').innerText = total + " ‚ÇΩ";
                    }
                },

                updateStats() {
                    document.getElementById('stat-orders').innerText = App.Store.history.length;
                    document.getElementById('stat-spent').innerText = App.Store.totalSpent + " ‚ÇΩ";
                },

                openModal(prodId) {
                    const prod = App.Data.products.find(p => p.id === prodId);
                    App.Store.selectedProduct = prod;
                    
                    document.getElementById('pay-item-name').innerText = prod.name;
                    document.getElementById('pay-item-price').innerText = prod.price + " ‚ÇΩ";
                    
                    document.getElementById('payment-methods').style.display = 'block';
                    document.getElementById('payment-processing').style.display = 'none';
                    document.getElementById('modal-payment').classList.add('active');
                    
                    window.Telegram.WebApp.HapticFeedback.impactOccurred('medium');
                },

                closeModal() {
                    document.getElementById('modal-payment').classList.remove('active');
                },

                showHistory() {
                    if(App.Store.history.length === 0) {
                        window.Telegram.WebApp.showAlert("–£ –≤–∞—Å –µ—â–µ –Ω–µ—Ç —Å–æ–≤–µ—Ä—à–µ–Ω–Ω—ã—Ö –ø–æ–∫—É–ø–æ–∫.");
                        return;
                    }
                    
                    const list = App.Store.history.map(h => `üì¶ ${h.name} - ${h.price}‚ÇΩ (${h.date})`).join('\n\n');
                    window.Telegram.WebApp.showAlert("–í–∞—à–∞ –∏—Å—Ç–æ—Ä–∏—è:\n\n" + list);
                }
            },

            // –ë–ò–ó–ù–ï–°-–õ–û–ì–ò–ö–ê (CORE LOGIC)
            Logic: {
                openCategory(catId) {
                    const cat = App.Data.categories.find(c => c.id === catId);
                    const products = App.Data.products.filter(p => p.cat_id === catId);
                    
                    document.getElementById('current-cat-name').innerText = cat.name;
                    const list = document.getElementById('prod-list');
                    
                    list.innerHTML = products.map(p => `
                        <div class="product-card anim-slide-up" onclick="App.UI.openModal(${p.id})">
                            <div class="prod-info">
                                <h3>${p.name}</h3>
                                <p>${p.info} ‚Ä¢ –í –Ω–∞–ª–∏—á–∏–∏: ${p.stock}</p>
                            </div>
                            <div class="prod-price">${p.price} ‚ÇΩ</div>
                        </div>
                    `).join('');
                    
                    App.UI.toggleShopView(true);
                    window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
                },

                search(query) {
                    App.Store.searchQuery = query.toLowerCase();
                    const grid = document.getElementById('cat-grid');
                    
                    if(App.Store.searchQuery.length > 0) {
                        const filtered = App.Data.products.filter(p => 
                            p.name.toLowerCase().includes(App.Store.searchQuery)
                        );
                        
                        App.UI.toggleShopView(true);
                        document.getElementById('current-cat-name').innerText = "–†–µ–∑—É–ª—å—Ç–∞—Ç—ã –ø–æ–∏—Å–∫–∞";
                        const list = document.getElementById('prod-list');
                        
                        if(filtered.length === 0) {
                            list.innerHTML = `<p style="text-align: center; color: var(--text-secondary); padding: 40px;">–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ...</p>`;
                        } else {
                            list.innerHTML = filtered.map(p => `
                                <div class="product-card" onclick="App.UI.openModal(${p.id})">
                                    <div class="prod-info">
                                        <h3>${p.name}</h3>
                                        <p>${p.info}</p>
                                    </div>
                                    <div class="prod-price">${p.price} ‚ÇΩ</div>
                                </div>
                            `).join('');
                        }
                    } else {
                        App.UI.toggleShopView(false);
                    }
                },

                processPayment(method) {
                    const p = App.Store.selectedProduct;
                    document.getElementById('payment-methods').style.display = 'none';
                    document.getElementById('payment-processing').style.display = 'block';
                    
                    App.Admin.log(`Initiating ${method} payment for item: ${p.id}`);
                    
                    // –≠–º—É–ª—è—Ü–∏—è –∑–∞–¥–µ—Ä–∂–∫–∏ —Å–µ—Ç–∏ –∏ –ø—Ä–æ–≤–µ—Ä–∫–∏ Lolz API
                    setTimeout(() => {
                        this.completeOrder(p);
                    }, 2500);
                },

                completeOrder(product) {
                    const order = {
                        id: Date.now(),
                        name: product.name,
                        price: product.price,
                        date: new Date().toLocaleDateString('ru-RU'),
                        data: "LOGIN:PASS:" + Math.random().toString(36).substr(2, 9).toUpperCase()
                    };
                    
                    App.Store.history.unshift(order);
                    localStorage.setItem('zik_history', JSON.stringify(App.Store.history));
                    
                    window.Telegram.WebApp.HapticFeedback.notificationOccurred('success');
                    App.UI.closeModal();
                    App.UI.updateStats();
                    
                    window.Telegram.WebApp.showConfirm(`–û–ø–ª–∞—Ç–∞ –ø—Ä–æ—à–ª–∞! –í–∞—à —Ç–æ–≤–∞—Ä:\n${order.data}\n\n–°–∫–æ–ø–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ?`, (ok) => {
                        if(ok) {
                            navigator.clipboard.writeText(order.data);
                            window.Telegram.WebApp.showAlert("–î–∞–Ω–Ω—ã–µ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω—ã –≤ –±—É—Ñ–µ—Ä –æ–±–º–µ–Ω–∞!");
                        }
                    });
                    
                    App.Admin.log(`Order ${order.id} COMPLETED for ${App.Store.user.id}`);
                },

                checkout() {
                    // –õ–æ–≥–∏–∫–∞ –¥–ª—è –ø–æ–∫—É–ø–∫–∏ –≤—Å–µ–π –∫–æ—Ä–∑–∏–Ω—ã (–≤ –¥–∞–Ω–Ω–æ–π –≤–µ—Ä—Å–∏–∏ –ø–æ –æ–¥–Ω–æ–º—É)
                    window.Telegram.WebApp.showAlert("–§—É–Ω–∫—Ü–∏—è –ø–∞–∫–µ—Ç–Ω–æ–π –ø–æ–∫—É–ø–∫–∏ –±—É–¥–µ—Ç –¥–æ—Å—Ç—É–ø–Ω–∞ –≤ v11.0. –û–ø–ª–∞—Ç–∏—Ç–µ —Ç–æ–≤–∞—Ä—ã –ø–æ –æ—Ç–¥–µ–ª—å–Ω–æ—Å—Ç–∏.");
                },

                removeFromCart(index) {
                    App.Store.cart.splice(index, 1);
                    App.UI.renderCart();
                    window.Telegram.WebApp.HapticFeedback.impactOccurred('light');
                }
            },

            // –ú–û–î–£–õ–¨ –ê–î–ú–ò–ù–ò–°–¢–†–ê–¢–û–†–ê
            Admin: {
                log(msg) {
                    const logBox = document.getElementById('admin-log');
                    const time = new Date().toLocaleTimeString();
                    logBox.innerHTML += `<br>> [${time}] ${msg}`;
                    logBox.scrollTop = logBox.scrollHeight;
                },

                clearLogs() {
                    document.getElementById('admin-log').innerHTML = "> Logs cleared by admin.";
                },

                toggleStock() {
                    const randomId = Math.floor(Math.random() * App.Data.products.length);
                    const prod = App.Data.products[randomId];
                    prod.stock += 10;
                    this.log(`Restocked ${prod.name} (+10 units)`);
                    window.Telegram.WebApp.showAlert(`–¢–æ–≤–∞—Ä ${prod.name} –ø–æ–ø–æ–ª–Ω–µ–Ω!`);
                }
            }
        };

        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ
        window.addEventListener('load', () => App.UI.init());

    </script>
</body>
</html>

